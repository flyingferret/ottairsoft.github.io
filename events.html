---
layout: default
title: Up Coming Events
permalink: /events/
description: "ENTER HERE"
---
<section id="about" class="about">
    <div class="container">
        <div class="row">
                <div class="" id="eventList">
                    today tomorrow yesterday
                    </div>
        </div>
        <!-- /.row -->
    </div>
    <!-- /.container -->
</section>

		<script>
			const MONTH = new Array("JAN", "FEB", "MAR", "APR", "MAY", "JUN", "JUL", "AUG", "SEP", "OCT", "NOV", "DEC");
			const WEEKDAY = new Array("SUN", "MON", "TUE", "WED", "THU", "FRI", "SAT");

			//Returns true if timestamp is in BST, false if not
			function isBST(timestamp) {
				switch (timestamp.getUTCFullYear()) {
					case 2017:
						if ((timestamp >= new Date("2017-03-26 01:00:00Z")) && (timestamp <= new Date("2017-10-29 01:00:00Z"))) {
							return true;
						} else {
							return false;
						}
						break;

					case 2018:
						if ((timestamp >= new Date("2018-03-25 01:00:00Z")) && (timestamp <= new Date("2018-10-28 01:00:00Z"))) {
							return true;
						} else {
							return false;
						}
						break;

					case 2019:
						if ((timestamp >= new Date("2019-03-31 01:00:00Z")) && (timestamp <= new Date("2019-10-27 01:00:00Z"))) {
							return true;
						} else {
							return false;
						}
						break;

					default:
						return false;
				}
			}

			//Returns a string detailing the date and time
			function formatDateTime(timestamp) {
				var output = "";

				//Daylight saving time
				var daylightSaving = isBST(timestamp);
				if (daylightSaving) {
					var hours = timestamp.getUTCHours() + 1;
				} else {
					var hours = timestamp.getUTCHours();
				}

				//Assemble date
				output += WEEKDAY[timestamp.getUTCDay()];
				output += " ";
				if (timestamp.getUTCDate() < 10) {
					output += "0" + timestamp.getUTCDate();
				} else {
					output += timestamp.getUTCDate();
				}
				output += " ";
				output += MONTH[timestamp.getUTCMonth()];
				output += " ";
				output += timestamp.getUTCFullYear();

				output += " - ";

				//Assemble time
				if (hours < 10) {
					output += "0" + hours;
				} else {
					output += hours;
				}
				output += ":";
				if (timestamp.getUTCMinutes() < 10) {
					output += "0" + timestamp.getUTCMinutes();
				} else {
					output += timestamp.getUTCMinutes();
				}

				if (daylightSaving) {
					output += " hours BST";
				} else {
					output += " hours GMT";
				}

				return output;
			}

			//Returns a string detailing the time
			function formatTime(timestamp) {
				var output = "";

				//Daylight saving time
				var daylightSaving = isBST(timestamp);
				if (daylightSaving) {
					var hours = timestamp.getUTCHours() + 1;
				} else {
					var hours = timestamp.getUTCHours();
				}

				//Assemble time
				if (hours < 10) {
					output += "0" + hours;
				} else {
					output += hours;
				}
				output += ":";
				if (timestamp.getUTCMinutes() < 10) {
					output += "0" + timestamp.getUTCMinutes();
				} else {
					output += timestamp.getUTCMinutes();
				}

				if (daylightSaving) {
					output += " hours BST";
				} else {
					output += " hours GMT";
				}

				return output;
			}

			//Parse JSON
			 var request = new XMLHttpRequest();
			 request.open("GET", "{{ site.baseurl }}/json/event.json", false);
			 request.send(null)
			 var event = JSON.parse(request.responseText);
			 for (var i = 0; i < event.length; i++) {
				 event[i].start = new Date(event[i].start);
				 event[i].end = new Date(event[i].end);
			 }

			 //Sort events by start timestamp
			 event.sort(
				 function(a, b) {
					 return a.start - b.start;
				 }
			 );

			//Create HTML
			var currentDate = new Date();
			var printedFirstRow = false;
			var text = '<table class="dataTable"><tr><th>Event</th><th>Start</th><th>End</th></tr>';
			for (var i = 0; i < event.length; i++) {
				if (event[i].end > currentDate) {
					if (i > 0) {
						if ((event[i].start.getMonth() != event[i - 1].start.getMonth()) && (printedFirstRow)) {
							text += "<tr><td><br/></td></tr>";
						}
					}

					if (event[i].start.getDay() != event[i].end.getDay()) {
						text += '<tr><td>' + event[i].title + '</td><td>' + formatDateTime(event[i].start) + '</td><td>' + formatDateTime(event[i].end) + '</td></tr>';
						printedFirstRow = true;
					} else {
						if (event[i].title == "Skirmish Day") {
							text += '<tr><td><a href="skirmishDays.html">' + event[i].title + '</a></td><td>' + formatDateTime(event[i].start) + '</td><td>' + formatTime(event[i].end) + '</td></tr>';
						} else if (event[i].title == "Mission Day") {
							text += '<tr><td><a href="missionDays.html">' + event[i].title + '</a></td><td>' + formatDateTime(event[i].start) + '</td><td>' + formatTime(event[i].end) + '</td></tr>';
						} else {
								text += '<tr><td>' + event[i].title + '</td><td>' + formatDateTime(event[i].start) + '</td><td>' + formatTime(event[i].end) + '</td></tr>';
						}
						printedFirstRow = true;
					}
				}
			}
			text += '</table>';

			//Insert HTML into document
			document.getElementById("eventList").innerHTML = text;
		</script>
