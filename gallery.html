<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8"/>
		<meta name="description" content="Over The Top Airsoft Adventures Anglesey"/>
		<meta name="keywords" content="airsoft,anglesey,skirmish"/>
		<meta name="author" content="Jake Pryce-Jones"/>
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
		<link href="css/class.css" type="text/css" rel="stylesheet"/>
		<link href="css/keyframe.css" type="text/css" rel="stylesheet"/>
		<link href="css/element.css" type="text/css" rel="stylesheet"/>
		<title>OTT Airsoft Adventures</title>
	</head>
	<body>
		<div class="banner">
			<h1>OTT Airsoft Adventures</h1>
      <a href="index.html" class="banner_button">About Us</a>
			<a href="contact.html" class="banner_button">Contact Us</a>
			<a href="map.html" class="banner_button">Find Us</a>
			<a href="gallery.html" class="banner_button">Gallery</a>
			<a href="dates.html" class="banner_button">Operations</a>
		</div>
		<div class="content_box">
			<h2>Image Gallery</h2>
			<div style="a">
				<div id="gallery"/>
			</div>
		</div>
		<div class="banner">
			<a href="index.html" class="banner_button">About Us</a>
			<a href="contact.html" class="banner_button">Contact Us</a>
			<a href="map.html" class="banner_button">Find Us</a>
			<a href="gallery.html" class="banner_button">Gallery</a>
			<a href="dates.html" class="banner_button">Operations</a>
			<br/>
			<p class="banner">&copy; Copyright Over The Top Airsoft Adventures Anglesey 2018.</p>
		</div>
		<script>
			//Returns a pseudorandom integer such that 0 < n < ceiling
			function randInt(ceiling) {
				return Math.ceil(Math.random() * 1000000) % ceiling
			}

			//Parse JSON
			var request = new XMLHttpRequest();
			request.open("GET", "json/gallery.json", false);
			request.send(null)
			var image = JSON.parse(request.responseText);

			//Calculate how many rows there should be
			var noRows = Math.floor(image.length / 3);
			if (image.length % 3 != 0) {
				noRows++;
			}

			//Pseudorandomly permute image array
			for (i = 0; i < image.length; i++) {
				var randomIndex = randInt(image.length);
				var swap = image[i];
				image[i] = image[randomIndex];
				image[randomIndex] = swap;
			}

			//Put images into table
			var text = '<table>';
			for (i = 0; i < noRows; i++) {
				for (j = 0; j < 3; j++) {
					if (3 * i + j >= image.length) {
						break;
					} else {
						text += '<td><table><tr><td width="30%"><a href="';
						text += image[3 * i + j].image;
						text += '"><image class="gallery_image" src="';
						text += image[3 * i + j].thumbnail;
						text += '"/></a></td></tr></table></td>';
					}
				}
				text += '</tr>';
			}
			text += '</table>';
			document.getElementById('gallery').innerHTML = text;
		</script>
	</body>
</html>
